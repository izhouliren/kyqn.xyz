# 中美科技战后，中国如何建设自己的Linux 操作系统？

[B站开源青年视频链接](https://www.bilibili.com/video/BV1rC4y1j7w7/)

操作系统是一个特别小众的领域<br>
虽然我们每天都在使用它<br>
但是当你随机问一下周围的同事<br>
操作系统是有啥用<br>
他们几乎不能说出一个所以然<br>
最后为了让你理解，<br>
他们会说操作系统就是 Windows、是Android、是iOS<br>

当我们把视角从使用者集中到软件开发者这个群体<br>
集中到 Linux开发这个领域，<br>
我们发现这个是一个小众领域中的小众领域<br>
中国的开发者数量已经达到了 755万<br>
其中从事 Linux 的开发者不过2万<br>
占比不超过百分之零点二<br>
所以，操作系统是一个淡出大众视野的技术领域<br>
但是，中美之间的科技战争<br>
让我们再一次意识到拥有中国自己操作系统的重要性<br>
操作系统再次回到大众视野当中<br>
但是做操作系统哪有那么容易<br>

---

操作系统是一个软件<br>
他的重要性在于<br>
他的是硬件和软件的中枢<br>
一方面，他要管理计算机中所有硬件<br>
像CPU、显卡、内存、网络等等<br>
都需要在操作系统中做好驱动<br>
才可以正常运行<br>
另外一方面，操作系统是其他应用可以被开发出来的基础<br>
QQ、微信、阿里云盘、PS 等等这些软件都是在 MacOS 或者 Windows 上开发出来的<br>
如果没有操作系统，让这些应用直接和硬件交互<br>
那么就不可能有今天如此丰富的软件应用。<br>
这，就是操作系统的重要性<br>

如果中国想做自己的操作系统<br>
就必须拥有自己的硬件，也是芯片<br>
否则操作系统就是无本之木，无源之水<br>
缺芯少魂是我们这个国家信息产业的永远的痛<br>
芯是以芯片为代表的半导体产业链<br>
魂就是以 Linux 为代表的操作系统<br>
因为缺芯，所以少魂<br>
中国人深知这一点<br>
所以这些年来，我们芯片的发展的足够迅速<br>
华为拿到了armv8的授权，麒麟芯片和鲲鹏芯片分别在ToC和ToB 市场实现大规模商用<br>
龙芯推出自主指令集龙架构， 3A5000性能媲美英特尔，在爱好者圈子里取得非常好的口碑。<br>
也正是中国这些过于优秀的成绩<br>
不符合美国主导下的世界秩序中给中国在的定位<br>
在美国人看来，<br>
中国是一个给西方发达国家提供原材料和制作工业品的国家<br>
中国想发展自己的芯片产业，那确实有点不务正业。<br>
所以这些企业纷纷登上了美国的实体名单<br>
他们以为中国会像日本、韩国和欧洲一样<br>
在美国的大棒下，乖乖屈服<br>
相反，在制裁后，中国芯片产业的发展再次提速<br>
像华为拿到 armv9 授权，麒麟9000s 遥遥领先<br>
昇腾910B 性能媲美英伟达A100 <br>
龙芯推出3A6000，性能持平 Intel  10代 i3<br>
摩尔线程推出 S80 国产显卡，可以与 3060 掰掰手腕<br>
到现在，中国已经走出缺芯少魂的阶段<br>
进入到强芯补魂的阶段<br>
那么，这个魂我们该怎么补呢？<br>

---

构建中国的自己的操作系统<br>
就要像红帽创始人马克艾文（Marc Ewing）一样<br>
自己选择内核、编译器、JDK、Python 虚拟化、容器等众多这些底层软件<br>
并且把这些软件通过修改测试有机的结合在一起<br>
这些底层软件非常重要<br>
因为他们是其他应用可以正常运行的基础。<br>
Linux 和 Windows 不一样<br>
它的软件之间存在着蜘蛛网般复杂的依赖<br>
现在大家看到的就是 openEuler 社区软件仓库中所有软件的依赖关系<br>
通过不断放大可以看到<br>
每一个点都是一款软件<br>
两个点之间的连线说明这两个软件中存在单向依赖<br>
所谓依赖是指如果缺少了被依赖的这个软件<br>
那么另外一个软件或者说这一条线上的软件都无法正常运行<br>
这个图想告诉大家的就是选择这些基础软件的重要性<br>
如果你选的这些底层软件版本有问题或者与其他被依赖的软件版本不同<br>
例如 GCC<br>
那么你需要重新适配依赖 GCC 的所有软件<br>
这是一个非常大的工作量<br>
需要前期在不产生任何经济价值的情况下，投入大量的人力<br>
在所有的软件适配完毕后，后期还需要投入大量的人力来进行维护<br>
CentOS和Ubuntu是国际上成熟的 Linux操作系统<br>
他们的软件数量大概在3.5万<br>
自己打包和后期维护的成本可见一斑<br>

中国最早的一批 Linux 厂商在预算有限、技术实力薄弱的情况下<br>
没有精力去做这些基础的事情。<br>
这也就是为什么<br>
中国早期的 Linux 一直依赖某个Linux 发行版的原因。<br>
但是他们在 Linux 易用性方面取得的成就<br>
可以让更多人可以像 Windows 一样使用 Linux<br>
降低了Linux 的使用门槛，也是对 Linux 的一种贡献。<br>

所以，中国的操作系统要完成从内核到底层软件的选型<br>
这样才是大家认可的中国的操作系统<br>
但，这可行吗？<br>
还是说，我们应该站在巨人的肩膀上并成为巨人？<br>

2019年，在禁令颁布后<br>
华为宣布开源内部使用的EulerOS，开源后命名为 openEuler<br>
这是一个可以不受任何发行版制约<br>
可以独立演进的 Linux 操作系统。<br>
“独立演进”并是为了响应国家政策<br>
而是华为业务可以继续发展的必然要去<br>
这句话可以追溯到2014年<br>

2014年 EulerOS 在华为内部进行众测<br>
在众测海报上写着这样的一句话<br>
EulerOS 是以 CentOS 7.1 为基础<br>
逐渐脱离主干，独立演进的企业级Linux操作系统<br>

看到第一句话，你会觉得 EulerOS 和中国其他的 Linux 并没有什么区别，都是衍生版<br>
但如何理解第二句话中的独立演进呢?<br>

独立演进是指在极端环境下，操作系统依然可以稳定的运行。<br>
这些极端情况包括但不限于以下几种情况：<br>
一、芯片架构被禁止的情况下，中国是否可以有其他芯片架构可以支撑操作系统运行？<br>
假设x86和 Arm 在中国被禁用，中国是否可以有自己的芯片架构运行操作系统？前面也说过，这是中国建设自己操作系统的基础。<br>
二、上游社区的 Linux突然停止更新，操作系统是否依然可以继续发展？<br>
像 CentOS 操作系统更新策略发生变化后<br>
CentOS 的衍生版是否可以自主选择内核和其他底层软件，按照版本规划继续发布新的系统版本？<br>
三、Linux 的关键组件在被禁用的情况下，操作系统是否依然可以正常运行？<br>
像 systemd 的知识产权在美国，那么假如某一天美国不让中国用了，那么我们的操作系统是否可以继续正常运行？<br>
四、是否有独立自主的漏洞管理体系，出现高危系统漏洞，是否可以自行处理？<br>
像 Log4j 这样的史诗漏洞如果再出现，操作系统是等待上游社区发布补丁，还是自己可以排查出所以风险，并自行修复？<br>
五、软件仓库是否可以自主维护，而不依赖于上游社区或者第三方。<br>
以 CentOS 衍生版为例，衍生版所使用的软件是来自于 CentOS 社区软件仓库的拷贝<br>
还是衍生版厂商或者社区直接从各个软件的上游社区拿到源码自己打包？<br>
如果你自己打包，那么请回看一下前面讲到的软件依赖关系<br>
和开发并维护一个软件仓库的难度和成本<br>

上面这些问题总结一下就是中国现在遇到的“卡脖子”问题<br>
说起来容易，但是每一条实现起来都不容易。<br>
但是如果这些“卡脖子”问题都解决了<br>
那么还能说这个操作系统是衍生版吗？<br>
这个问题的答案在今后的日子里还会在被反复的讨论，反复的论证<br>
就让我们拭目以待吧。<br>
